# microcredit
Microservice application for accepting and verifying loan applications
Проект представляет собой   мини-кредитный конвейер. Он состоит из цепочки микросервисов, которые обрабатывают заявки на кредиты.

Первый  микросервис (reception) - принималка заявок.
C помощью REST-метода POST /requests, принимает в JSON заявку на кредит. В заявке следующие поля: дата рождения, ФИО (одним полем), сумма в рублях, количество месяцев и уникальный ID заявки. Этот микросервис  принимать заявку и помещать ее в топик Kafka. Заявка сериализуется в JSON. Kafka установлена  в Docker ,с помощью файла docker-compose.yaml производится развертывание контейнера с Kafka(команда на выполнение docker-compose -f docker-compose.yaml up) топик называться requests.

Второй микросервис(vertification) - анализатор заявок.
На регулярной основе вычитывает новые заявки из очереди сообщений в Kafka и анализирует их. Если подавателю меньше 18 или больше 80 лет, заявка отклоняется. А также заявку нужно отклонить, если человек хочет более 50 миллионов. Иначе заявка одобряется. Заявки дополняются статусом (два значения - ОДОБРЕН/НЕ ОДОБРЕН) и сохраняются вместе со статусом в БД .В БД для этой цели заведена  таблица processed_requests. 

Третий микросервис(exportPDF) - генератор договоров.
С помощью REST метод GET /generate-agreement/{requestId}. В части URL requestId этот метод принимает уникальный идентификатор заявки, который приходил в первый микросервис.По этому ID сервис забирает из БД SQL и из таблицы processed_requests  заявку. Если у нее статус ОДОБРЕНА -  генерирует PDF-документ, в который включены все данные из заявки в форме таблицы. Если статус НЕ ОДОБРЕНА, возвращает ошибку «Заявка не одобрена».
